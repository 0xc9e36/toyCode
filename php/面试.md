### 浏览器访问一个网页过程(www.baidu.com)
[点击参考](https://github.com/skyline75489/what-happens-when-zh_CN/blob/master/README.rst)
* 键盘读入，浏览器解析协议，路径信息；对URL中非ASCII字符进行编码。
* 检查浏览器内置HSTS列表，判断是否使用HTTPS协议。如果没有在列表中，又需要使用HTTPS，服务器会向客户端发送一个响应告知客户端应该使用HTTPS。
* DNS解析：浏览器dns缓存，本地hosts，操作系统缓存(gethostbyname())，如果都没有就向本地DNS服务器查询(UDP协议，53端口)，这一步是递归查询。而本地DNS服务器如果没有查到，就向根DNS服务器查询，
根DNS服务器返回com级域名服务器的IP，本地域名服务器再去查询com DNS服务器，com DNS服务器找到负责baidu.com的DNS服务器，并将IP返回给本地DNS服务器。
* ARP查询
  - 同一网络中：广播
  - 不同网络：经过路由器转发，目的MAC地址设置为路由器网MAC地址，IP地址不变。
* 使用套接字，调用系统库函数 socket，请求TCP流套接字，封装HTTP请求报文,层层封装，物理介质发送。
* 建立连接：请求在TCP第三次握手就发送出去了，浏览器会选择大于1024的端口。
* TLS握手
  - 客户端发送ClientHello报文，包含客户端TLS版本，可用的加密算法，压缩算法。
  - 服务器返回ServerHello报文，包含服务端TLS版本，服务器选择的压缩，加密算法，以及CA签发的数字证书，证书中包含服务端的公钥。
  - 客户端根据自己信任的CA列表去验证服务器证书是否合格，如果可信，客户端生成一串伪随机数，使用服务器公钥加密，用于生成对称密钥。
  - 服务器使用私钥解密，并生成了对称密钥
  - 客户端发送Finished消息给服务端，使用对称密钥加密一个hash。
  - 服务端解密此hash，然后生成自己的hash，如果两个值相同，向客户端发送一个Finished，也使用对称密钥加密。
  - 此后所有通讯内容使用对称密钥加密。
* 路由寻址：每经过一个路由器，TTL减一，当减小到0时还没有到达则丢弃。
* 数据传送
* 释放连接：四次挥手

## HTTP常见状态码
* 1xx：服务器已接收，需要客户端继续执行
* 2xx：成功，操作成功并处理
  - 200：请求完成
* 3xx：重定向，需要进一步操作
  - 301：永久移动
  - 302：临时移动
  - 304：未修改
* 4xx：客户端错误
  - 400：客户端语法错误
  - 401:身份验证未通过
  - 403：禁止访问
  - 404：资源不存在
* 5xx：服务端错误
  - 500：服务器内部错误
  - 501：服务器不支持请求方法
  - 502：代理服务器从远程收到无效的请求
  - 504：代理服务器未及时从远程收到请求
  - 505：HTTP协议版本不支持
