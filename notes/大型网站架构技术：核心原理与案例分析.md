###### 这本书总体讲述还算比较全面，只是内容比较浅显，给人一种泛泛而谈的感觉，也可能因为我自身水平有限，不过读完也算是提高见识了吧。


## 第一章 大型网站架构演化

#### 1.1 大型网站软件系统的特点
* 高并发，大流量
* 高可用
* 海量数据
* 用户分布广泛，网络情况复杂
* 安全环境恶劣
* 需求快速变更，发布频繁
* 渐进式发展

#### 1.2 大型网站架构演化发展历程
* 一台服务器（LAMP）
* 应用与数据分离
  - 应用服务器
  - 文件服务器
  - 数据库服务器
* 缓存
  - 本地缓存：速度快，但受制于应用服务器内存
  - 分布式缓存：集群，理论上不受内存容量限制
* 应用服务器集群
  - 负载均衡调度服务器
* 数据库读写分离
* 反向代理和CDN加速：原理都是缓存，CDN是在网络提供商的机房缓存数据， 而反向代理中如果有数据则直接返回
* 分布式文件系统和分布式数据库
* NoSQL和搜索引擎
* 业务拆分
* 分布式服务

# 第二章 大型网站架构模式

#### 2.1 网站架构模式
* 分层：横向
  - 应用层
  - 服务层
  - 数据层
* 分割：纵向
* 分布式
  - 分布式应用和服务
  - 分布式静态资源
  - 分布式数据存储
  - 分布式计算
  - 分布式配置
  - 分布式锁
  - 分布式文件
* 集群
* 缓存
  - CDN
  - 反向代理
  - 本地缓存
  - 分布式缓存
* 异步解耦
  - 单一服务器内通过多线程共享内存队列实现异步
  - 在分布式系统中通过分布式消息队列实现异步
* 冗余
* 自动化
* 安全


## 第三章 大型网站架构核心要素

* 性能指标
* 可用性
* 伸缩性
* 扩展性
* 安全性


## 第四章 网站的高性能架构

#### 4.1 性能测试指标
  - 响应时间
  - 并发数
  - 吞吐量
  - 性能计数器：包括系统负载，对象与线程数，内存使用，CPU　使用，磁盘和网络　I/O　等指标

#### 4.2 Web前端性能优化
* 浏览器访问优化
  - 减少HTTP请求，　合并　CSS，合并 JavaScript，合并图片
  - 使用浏览器缓存
  - 启用压缩
  - CSS 放在最上面，　JavaScript　放在页面最下面
  - 减少Cookie传输
* CDN加速
* 反向代理

#### 4.3 应用服务器性能优化
* 分布式缓存
 - 基本原理：内存Hash表，针对读多写少，很少变化的数据
 - 合理使用：频繁修改，没有热点数据，数据不一致，缓存不应该作为一个可靠数据源，缓存预热，缓存穿透
 - 分布式缓存架构：一种更新同步，另一种互不通信
 - Memcached：服务器之间互不通信
* 异步操作
* 集群
* 代码优化
 - 多线程：CPU密集型，线程数不要超过CPU核心数；I/O密集型，可以适当多增加;解决线程安全：对象无状态，局部对象，并发资源使用锁
 - 资源复用：　单例，　对象池
* 数据结构
* 垃圾回收

#### 4.4 存储性能优化
* 机械硬盘 vs 固态硬盘
* B+树 vs LSM树：许多NoSQL采用LSM树
* RAID vs HDFS
 


## 第五章　网站高可用架构
#### 架构高可用
* 三层架构模式

#### 应用高可用
* 负载均衡进行无状态失效转移
* Session管理手段
 - Session复制
 - Session绑定
 - Cookie记录
 - Session集中存储
 #### 高可用的服务
 * 分级管理
 * 超时管理
 * 异步调用
 * 服务降级
  - 拒绝优先级低的服务
  - 关闭功能
* 幂等性：服务层必须保证重复调用和一次调用的结果相同
#### 高可用的数据
* CAP原理：一个提供数据的存储系统无法同时满足数据一致性，数据可用性，分区耐受性这三个条件
 - 数据强一致
 - 数据用户不一致
 - 数据最终不一致
* 数据备份
* 失效转移



 




## 第六章 网站的伸缩性架构

#### 6.1  网站架构的伸缩性设计
* 不同功能进行物理分离实现伸缩
  - 纵向分离
  - 横向分离
* 单一功能通过集群实现伸缩
  - 应用服务器集群伸缩性
  - 数据服务器伸缩性 
  
#### 6.2 应用服务器集群伸缩性设计
* HTTP重定向负载均衡
* DNS域名解析负载均衡
* 反向代理负载均衡
* IP负载均衡
* 数据链路层负载均衡
* 负载均衡算法
  - 轮询
  - 加权轮询
  - 随机
  - 最少连接
  - 源地址散列  

#### 6.3 分布式缓存集群伸缩性设计
* Memcached分布式缓存集群的访问模型
* Memcached分布式缓存集群的伸缩性挑战
* 一致性Hash算法

#### 6.3 数据存储服务器集群伸缩性设计
* 关系型数据库集群的伸缩性设计
  - Amoeba
  - Cobar
* NOSQL数据库的伸缩性设计
  - HBase
  - Zookeeper


## 第七章 网站的可扩展架构

  - 扩展性
  - 伸缩性
#### 7.1 构建可扩展的网站架构

#### 7.2 利用分布式消息队列降低系统耦合
通过消息对象分解系统耦合性
* 事件驱动架构
* 分布式消息队列
  - ActiveMQ
  - 伸缩性
  - 可用性
  
#### 7.3 利用分布式服务打造可复用的业务平台
通过接口分解系统耦合性
  - 横向拆分
  - 纵向拆分
* Web Service与企业级分布式服务
* 大型网站分布式的需求与特点
  - 负载均衡
  - 失效转移
  - 高效的远程通信
  - 整合异构系统
  - 对应用最少侵入
  - 版本管理
  - 实时监控
* 分布式服务框架设计
  - Dubbo
* 可扩展的数据结构


## 第八章 网站的安全架构

#### 8.1 网站应用攻击与防御
* XSS攻击
  - 反射型
  - 持久型
危险字符转义，HttpOnly等
* 注入攻击
  - sql注入
  - os注入
参数过滤，参数绑定
* CSRF攻击
  - 表单token
  - 验证码
  - Referer check
* Error Code
* HTML注释
* 文件上传
* 路径遍历
* ModSecurity

#### 8.2 信息加密技术及密钥安全管理
* 单向散列加密，加盐
* 对称加密
* 非对称加密
* 密钥保存

#### 8.3 信息过滤与反垃圾
* 文本匹配
* 分类算法
* 黑名单
* 风险控制
  - 账户风险
  - 买家风险
  - 卖家风险
  - 交易风险
  

## 第九章 淘宝网


## 第十章 维基百科



## 十二章 网购秒杀系统价格设计案例分析
* 技术挑战
  - 冲击现有业务
  - 数据库负载
  - 网络，服务器带宽增大
  - 直接下单
* 应对策略
  - 秒杀系统独立部署
  - 秒杀页面静态化
  - 增大带宽
  - 随机生成下单页面URL
* 架构设计
  - 控制秒杀商品页面购买按钮的点亮
  - 只允许第一个提交的订单被发送到订单子系统
  

## 第十三章 大型网站典型故障案例分析
* 写日志
* 高并发下访问数据库
* 高并发下锁引发引发故障
* 缓存引发故障
* 应用启动不同步
* 大文件读写独占磁盘
* 滥用生产环境
* 流程不规范
* 编程习惯不好














